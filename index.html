<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Result Calculator</title>

    <!-- Mobile Responsive -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Internal CSS -->
    <style>
        body {
            background-color: #f8f9fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        main {
            flex: 1;
        }

        .bg-purple {
            background-color: #c2191e !important;
        }

        .btn-pink {
            background-color: #31b34d;
            color: white;
        }

        .btn-pink:hover {
            background-color: #030352;
        }

        .card {
            border-radius: 12px;
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-dark bg-purple">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">Student Result Calculator</span>
    </div>
</nav>

<!-- Main Content -->
<main>
    <div class="container mt-4">
        <div id="alertBox"></div>

        <!-- Input Card -->
        <div class="card shadow mb-4">
            <div class="card-body">
                <h5 class="card-title mb-3">Enter Student Marks</h5>

                <input type="text" id="name" class="form-control mb-2" placeholder="Student Name">
                <input type="number" id="m1" class="form-control mb-2" placeholder="Subject 1">
                <input type="number" id="m2" class="form-control mb-2" placeholder="Subject 2">
                <input type="number" id="m3" class="form-control mb-3" placeholder="Subject 3">

                <button class="btn btn-pink w-100" onclick="calculateResult()">
                    Calculate Result
                </button>
            </div>
        </div>

        <!-- Result Card -->
        <div class="card shadow">
            <div class="card-body">
                <h5 class="card-title">Latest Result</h5>
                <p id="result" class="text-muted">No result calculated.</p>
            </div>
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="bg-purple text-white text-center py-3">
    <div class="container">
        <small>
            Â© 2025 Student Result Calculator | created by <strong>Mounika shree M</strong>
        </small>
    </div>
</footer>

<!-- JavaScript -->
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const results = JSON.parse(localStorage.getItem("studentResults")) || [];
        if (results.length > 0) {
            displayResult(results[results.length - 1]);
        }
    });

    function calculateResult() {
        const name = document.getElementById("name").value.trim();
        const m1 = Number(document.getElementById("m1").value);
        const m2 = Number(document.getElementById("m2").value);
        const m3 = Number(document.getElementById("m3").value);

        if (!name || m1 <= 0 || m2 <= 0 || m3 <= 0) {
            showAlert("Please enter all details correctly", "danger");
            return;
        }

        const total = m1 + m2 + m3;
        const avg = total / 3;

        let grade = "F";
        let status = "FAIL";

        if (m1 < 35 || m2 < 35 || m3 < 35) {
            grade = "F";
            status = "FAIL";
        } else {
            status = "PASS";
            if (avg >= 80) grade = "A";
            else if (avg >= 60) grade = "B";
            else if (avg >= 40) grade = "C";
            else grade = "D";
        }

        const resultData = { name, total, avg, grade, status };

        displayResult(resultData);

        const results = JSON.parse(localStorage.getItem("studentResults")) || [];
        results.push(resultData);
        localStorage.setItem("studentResults", JSON.stringify(results));

        showAlert(
            status === "PASS"
                ? "Result calculated successfully!"
                : "Student has failed in one or more subjects",
            status === "PASS" ? "success" : "danger"
        );
    }

    function displayResult(data) {
        document.getElementById("result").innerHTML = `
            <strong>Name:</strong> ${data.name}<br>
            <strong>Total:</strong> ${data.total}<br>
            <strong>Average:</strong> ${data.avg.toFixed(2)}<br>
            <strong>Grade:</strong> ${data.grade}<br>
            <strong>Status:</strong>
            <span class="${data.status === "PASS" ? "text-success" : "text-danger"}">
                ${data.status}
            </span>
        `;
    }

    function showAlert(msg, type) {
        const box = document.getElementById("alertBox");
        box.innerHTML = `
            <div class="alert alert-${type} alert-dismissible fade show">
                ${msg}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        `;
        setTimeout(() => box.innerHTML = "", 3000);
    }
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
